<img src="/static/logo.jpg" alt="a200" style="width: 720px;height: 360px;"> 
<h1>AUTOMOTIVE</h1>
<H2>BIG BUSINESS</H2>

<form id="searchForm">
    <input type="text" id="query" placeholder="Search..." required>
    <button type="submit">Search</button>
</form>

<form action="/add" method="post" enctype="multipart/form-data">
    <input type="text" name="brand" placeholder="brand name" required>
    <input type="text" name="name" placeholder="car name" required>
    <input type="number" name="year" placeholder="year" required>
    <input type="number" name="price" placeholder="price" required>
    <input type="file" name="img" accept="image/*" required>
    <button type="submit">Add Car</button>
</form>
<hr>

<div id="results"></div>

<script>
document.getElementById("searchForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const query = document.getElementById("query").value;

    fetch(`/search?query=${query}`)
        .then(response => response.json())
        .then(cars => {
            if(cars.lenght === 0) {
                document.getElementById("results").innerHTML = "<p>No cars found.</p>";
                return;
            }
            cars.forEach(car => {
                const carElement = document.createElement("div");
                carElement.innerHTML = `
                    <img src="/static/${car.img}" alt="${car.name}" style="width:300px; vertical-align: middle; margin-right:10px;">
                    ${car.name} - ${car.brand} - ${car.year} - $${car.price}
                `;
                document.getElementById("results").appendChild(carElement);
            });
        })
        .catch(error => console.error("Error:", error));
});
</script>